{
  "$schema": "./golden-tests.schema.json",
  "version": "1.0",
  "mcp_name": "UK Law MCP",
  "description": "Golden contract tests for the UK Law MCP",
  "tests": [
    {
      "id": "uk-001",
      "category": "article_retrieval",
      "description": "Retrieve Section 1(1) of Data Protection Act 2018",
      "tool": "get_provision",
      "input": { "document_id": "ukpga-2018-12", "provision_ref": "s1(1)" },
      "assertions": { "result_not_empty": true, "fields_present": ["results"], "text_contains": ["overview"] }
    },
    {
      "id": "uk-002",
      "category": "article_retrieval",
      "description": "Retrieve Section 1(1) of Computer Misuse Act 1990",
      "tool": "get_provision",
      "input": { "document_id": "ukpga-1990-18", "provision_ref": "s1(1)" },
      "assertions": { "result_not_empty": true, "fields_present": ["results"], "text_contains": ["unauthorised"] }
    },
    {
      "id": "uk-003",
      "category": "article_retrieval",
      "description": "Retrieve Section 1(1) of Online Safety Act 2023",
      "tool": "get_provision",
      "input": { "document_id": "ukpga-2023-50", "provision_ref": "s1(1)" },
      "assertions": { "result_not_empty": true, "fields_present": ["results"], "text_contains": ["introduction"] }
    },
    {
      "id": "uk-004",
      "category": "search",
      "description": "Search for 'data protection' returns relevant results",
      "tool": "search_legislation",
      "input": { "query": "data protection" },
      "assertions": { "result_not_empty": true, "min_results": 1 }
    },
    {
      "id": "uk-005",
      "category": "search",
      "description": "Search for 'cybersecurity' across UK statutes",
      "tool": "search_legislation",
      "input": { "query": "cybersecurity" },
      "assertions": { "result_not_empty": true }
    },
    {
      "id": "uk-006",
      "category": "search",
      "description": "Search for 'computer misuse' returns relevant results",
      "tool": "search_legislation",
      "input": { "query": "computer misuse" },
      "assertions": { "result_not_empty": true, "min_results": 1 }
    },
    {
      "id": "uk-007",
      "category": "citation_roundtrip",
      "description": "Validate citation for Data Protection Act 2018, s. 1",
      "tool": "validate_citation",
      "input": { "citation": "Data Protection Act 2018, s. 1" },
      "assertions": { "result_not_empty": true, "text_contains": ["\"valid\":true"] }
    },
    {
      "id": "uk-008",
      "category": "citation_roundtrip",
      "description": "Format citation for Data Protection Act 2018, s. 3",
      "tool": "format_citation",
      "input": { "citation": "Data Protection Act 2018, s. 3" },
      "assertions": { "result_not_empty": true, "text_contains": ["Section 3, Data Protection Act 2018"] }
    },
    {
      "id": "uk-009",
      "category": "currency",
      "description": "Check currency of Data Protection Act 2018",
      "tool": "check_currency",
      "input": { "document_id": "ukpga-2018-12" },
      "assertions": { "result_not_empty": true, "text_contains": ["\"is_current\":true"] }
    },
    {
      "id": "uk-010",
      "category": "eu_cross_reference",
      "description": "Get EU basis for Data Protection Act 2018 (GDPR implementation)",
      "tool": "get_eu_basis",
      "input": { "document_id": "ukpga-2018-12" },
      "assertions": { "result_not_empty": true, "text_contains": ["\"eu_documents\""] }
    },
    {
      "id": "uk-011",
      "category": "negative_test",
      "description": "Non-existent statute returns gracefully",
      "tool": "get_provision",
      "input": { "document_id": "ukpga-9999-99", "provision_ref": "s1" },
      "assertions": { "handles_gracefully": true }
    },
    {
      "id": "uk-012",
      "category": "negative_test",
      "description": "Search with no results handled gracefully",
      "tool": "search_legislation",
      "input": { "query": "xyznonexistentlawterm9999" },
      "assertions": { "handles_gracefully": true }
    },
    {
      "id": "uk-013",
      "category": "sources",
      "description": "list_sources returns jurisdiction and source metadata",
      "tool": "list_sources",
      "input": {},
      "assertions": { "result_not_empty": true, "text_contains": ["legislation.gov.uk", "United Kingdom"] }
    },
    {
      "id": "uk-014",
      "category": "search",
      "description": "Search with FTS5 explicit syntax (AND operator)",
      "tool": "search_legislation",
      "input": { "query": "data AND protection" },
      "assertions": { "result_not_empty": true, "min_results": 1 }
    },
    {
      "id": "uk-015",
      "category": "article_retrieval",
      "description": "Retrieve provision by human-readable statute title",
      "tool": "get_provision",
      "input": { "document_id": "Data Protection Act 2018", "provision_ref": "s1(1)" },
      "assertions": { "result_not_empty": true, "fields_present": ["results"] }
    },
    {
      "id": "uk-016",
      "category": "negative_test",
      "description": "Empty search query returns empty results without error",
      "tool": "search_legislation",
      "input": { "query": "" },
      "assertions": { "handles_gracefully": true }
    },
    {
      "id": "uk-017",
      "category": "search",
      "description": "Search with status filter (in_force only)",
      "tool": "search_legislation",
      "input": { "query": "data protection", "status": "in_force" },
      "assertions": { "result_not_empty": true }
    },
    {
      "id": "uk-018",
      "category": "about",
      "description": "About tool returns server metadata and dataset counts",
      "tool": "about",
      "input": {},
      "assertions": { "result_not_empty": true, "text_contains": ["UK Law MCP", "@ansvar/uk-law-mcp"] }
    }
  ]
}
